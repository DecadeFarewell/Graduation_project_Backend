webpackJsonp([5],{"2O/t":function(e,t){},"Iy+u":function(e,t){},"WBc+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Ys4Q"),a={props:{msg:{type:Object,required:!1,default:function(){}},name:{type:String,required:!0,default:function(){return""}}},filters:{formatTime:function(e){return Object(n.a)(1*e)}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-item-com"},[s("div",{staticClass:"user",class:{mine:e.msg.name==e.name}},[s("span",{staticClass:"name",class:{mine:e.msg.name==e.name,others:e.msg.name!=e.name}},[e._v(e._s(e.msg.name))]),e._v(" "),s("span",{staticClass:"ctime"},[e._v(e._s(e._f("formatTime")(e.msg.ctime)))])]),e._v(" "),s("div",{class:{mineContent:e.msg.name==e.name,content:e.msg.name!=e.name}},[s("span",{staticClass:"message"},[e._v(e._s(e.msg.msg))])])])},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(e){s("iNUG")},"data-v-4af7cd7a",null).exports,u={props:{userID:{type:Number,required:!0,default:function(){return-1}}},data:function(){return{sendText:""}},methods:{sendMsg:function(){console.log(this.userID,"iiiiii");var e=new FormData;e.append("userID",this.userID),e.append("content",this.sendText),this.$api.sendMessage(e).then(function(e){console.log(e,"success")}),this.sendText=""}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"send-message-com"},[s("div",{staticClass:"send-side"},[s("el-input",{staticClass:"sendMsg",attrs:{placeholder:"请输入内容，按回车发送"},model:{value:e.sendText,callback:function(t){e.sendText=t},expression:"sendText"}}),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.sendMsg}},[e._v("发送(S)")])],1)])},staticRenderFns:[]};var o={components:{MessageItem:r,SendMessage:s("VU/8")(u,c,!1,function(e){s("2O/t")},"data-v-e0f1de16",null).exports},mounted:function(){var e=this;this.timer=setInterval(function(){e.getMsgList()},1e3);var t=this.$store.state.userInfo;this.userName=t.username,this.userID=1*t.id},beforeDestroy:function(){this.timer=null},data:function(){return{msgList:[],userName:"",userID:-1,timer:null}},methods:{getMsgList:function(){var e=this;this.$api.getMessageList().then(function(t){console.log(t,"gggg"),e.msgList=t.data.data})}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-com"},[e._m(0),e._v(" "),s("ul",e._l(e.msgList,function(t,n){return s("li",{key:t.id},[s("MessageItem",{attrs:{msg:t,name:e.userName}})],1)}),0),e._v(" "),s("SendMessage",{attrs:{userID:e.userID}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"head"},[t("p",{staticClass:"onLine"},[this._v("多人在线聊天")])])}]};var l={components:{ChatRoom:s("VU/8")(o,m,!1,function(e){s("jmXp")},"data-v-686efd5e",null).exports},beforeRouteEnter:function(e,t,s){s()}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat"},[t("ChatRoom")],1)},staticRenderFns:[]};var f=s("VU/8")(l,d,!1,function(e){s("Iy+u")},"data-v-197f1e51",null);t.default=f.exports},Ys4Q:function(e,t,s){"use strict";t.a=function(e){var t=new Date(e),s=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return s+"年"+n+"月"+a+"日"+i+":"+r}},iNUG:function(e,t){},jmXp:function(e,t){}});
//# sourceMappingURL=5.8942b240d07bb3038fbe.js.map